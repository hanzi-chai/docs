---
title: 设计方案的元素
sidebar: { order: 2 }
---

要定义一个汉字输入方案，首先需要从汉字中提取出一些可以用于编码的特征，例如字根、笔画、声母、韵母等等，这些特征统称为「元素」。在编辑器界面中，点击左侧导航栏的「元素」即可进入元素编辑页面。

![](https://images.tansongchen.com/1769387285.png)

以米十五笔为例，从右边的「键盘映射」模块可以看出，它包含字根（显示为单个汉字）、笔画（显示为全角数字１、２、３、４、５、６）和汉语拼音的首字母（显示为 `首字母-q` 这样的名字）三类不同的元素。下面我们将分类讲解各种元素的作用。

# 字形元素

字形元素包括字根、笔画、二笔和结构四类。

![](https://images.tansongchen.com/1769387488.png)

## 字根

在本系统中，所有至少包含 2 个笔画的字符都可以作为字根（单笔画的处理请见下一节）。您可以在「元素类型」下方的搜索框中输入汉字或其笔画（用 12345 表示国标分类的横竖撇点折）来从现有的字形数据库中搜索一个字根。例如，搜索「12」可以看到如下结果：

![](https://images.tansongchen.com/1769387804.png)

搜索结果中除了 Unicode 所收录的汉字字符之外，还有很多是 Unicode 未收录但经常在输入方案中出现的非成字字根，这些非成字字根占用私用区码位并且使用 SVG 图形的方式来表示。

对于成字字根，用鼠标划过时会显示它的 Unicode（十六进制），而对于非成字字根，除了私用区 Unicode 还会显示一个别名（这个别名的命名方式符合 GF0014-2009 规范）。例如：

![](https://images.tansongchen.com/1769388030.png)

这表示该非成字的别名为「于无横」，且码位是 U+E413。

## 笔画

本系统共定义了 41 种笔画。一般来说，输入方案会将这些笔画分为若干类来处理，例如国家规范（GF2001-2001）给出的笔画分类规范将笔画分为五类（横竖撇点折）。本系统中将分类用数字表示（1、2、3、4、5、……），各个方案可以根据自己的需要创建任意数量的分类（例如「米十五笔」方案就使用了六个分类），每个分类所包含的笔画在「配置笔画分类」中定义：

![](https://images.tansongchen.com/1769388625.png)

![](https://images.tansongchen.com/1769388665.png)

:::note

笔画名称参考 [Unicode CJK 笔画](https://en.wikipedia.org/wiki/CJK_Strokes_(Unicode_block))（共 38 种笔画）。相较于 Unicode 区别在于：

1. U+31D2（P）称为平撇，而 U+31D3（SP）称为撇
2. 仿照撇，在捺中分出了平捺、点中分出了平点
3. 添加「特殊笔画」分类，用于表示一些无法归类的笔画

:::

## 二笔

二笔是将笔画分类两两组合构成的笔画对概念，一般需要结合二笔字形分析器来使用（后文再讲解）。

![](https://images.tansongchen.com/1769388779.png)

## 结构

汉字的结构也可以作为一种元素来使用：

![](https://images.tansongchen.com/1769388836.png)

# 字音元素

字音元素是指可以从拼音推导出来的元素。每个字音元素由一系列「拼写运算」来定义，表明了如何从完整的拼音通过一系列正则表达式的查找替换操作来得到这个元素。

![](https://images.tansongchen.com/1769388888.png)

例如，米十五笔所用到的「首字母」元素类别的定义如下：

![](https://images.tansongchen.com/1769389052.png)

系统内置了声母、韵母、双拼声母、双拼韵母、声调、首字母和末字母这几类元素的拼写运算，这些拼写运算默认以带调全拼为输入，并给出相应的成分。您也可以新建自己的拼写运算来执行自己想要的分析。点击「新建元素类型」，您可以直接编写拼写运算的各条规则，或载入某个拼写运算之后在此基础上修改：

![](https://images.tansongchen.com/1769389239.png)

# 自定义元素

有时候，系统所默认的对于字形和字音的分析方式可能不满足您的需要，此时您可以在系统的外部生成自己的元素，然后导入系统使用。该功能位于「基本」页面的右下角，请参考相应说明导入。

![](https://images.tansongchen.com/1769389474.png)

# 元素的安排

对于每一个元素，我们将指定它如何对应到编码，这种对应方式称为一个「安排」。首先，我们需要确定方案使用哪些字符作为编码字符（本系统支持使用全部 94 个可打印 ASCII 字符来编码），可以在「添加按键」中添加：

![](https://images.tansongchen.com/1769390133.png)

然后我们需要指定方案的编码类型，即每个元素最多用几个编码表示。大多数输入方案属于「单编码」，但像郑码等方案会出现一个元素用两个或以上的编码表示，此时就会用到「双编码」「三编码」甚至「四编码」。本系统最多支持四编码。

![](https://images.tansongchen.com/1769390165.png)

安排分为两种形式，分别称为「键位」安排和「归并」安排。

## 「键位」安排

「键位」安排是指逐个指定元素的各个编码。例如，对于单编码方案来说，「键位」安排就是一个编码；对于双编码方案来说，「键位」安排就是两个编码。在元素选择器中选择相应的元素后，在下方的「添加至……」输入相应的编码即可：

![](https://images.tansongchen.com/1769390504.png)

又例如，如果方案整体为双编码但某个元素为单编码，第二个编码可以选择为「无」：

![](https://images.tansongchen.com/1769390561.png)

在「键位」中，还可以引用其他元素的键位。例如，在「虎码」输入方案中，「广」的第一码定义为和「厂」相同，而第二码定义为 `g`，就可以这么表达：

![](https://images.tansongchen.com/1769390793.png)

## 「归并」安排

「归并」安排是指令某一个元素的所有编码等同于另一个元素。例如，在「米十五笔」中，「朩」归并到「木」：

![](https://images.tansongchen.com/1769391034.png)

:::note

「归并」安排和「键位」安排的引用之间的区别在于：「归并」是令一个元素的所有编码完全等同于另一个元素，而「键位」是令一个元素的某一个编码等同于另一个元素的某一个编码。请您根据自己的需要使用。

:::

# 在键盘上编辑安排

在元素首次添加安排之后，元素会出现在右侧的「键盘映射​」模块中。将鼠标移动到元素上面，会出现一个气泡，可以在里面直接修改元素的安排。例如，在下图中您可以修改元素「气」的键位，或者将其从键位改为归并。

![](https://images.tansongchen.com/1769391155.png)